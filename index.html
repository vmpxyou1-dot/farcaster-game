import nacl from "tweetnacl";
import { encodeUTF8, encodeBase64 } from "tweetnacl-util";

// Replace these with your actual account info
const header = { fid: 12345, type: "auth", key: "YOUR_PUBLIC_KEY" };
const payload = { domain: "farcaster-game-two.vercel.app" };

// Convert to strings
const headerStr = JSON.stringify(header);
const payloadStr = JSON.stringify(payload);

// Generate keypair from secret (your private key)
const secretKey = new Uint8Array([...]); // Your private key bytes
const signature = nacl.sign.detached(
  new TextEncoder().encode(headerStr + payloadStr),
  secretKey
);

// Encode signature in base64
const signatureB64 = encodeBase64(signature);

console.log({
  accountAssociation: {
    header: Buffer.from(headerStr).toString("base64"),
    payload: Buffer.from(payloadStr).toString("base64"),
    signature: signatureB64
  }
});
